# –†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã —Ä–∞–∑–ª–∏—á–µ–Ω–∏—è –∫–∞–º–Ω–µ–π –∏ –ª—å–¥–∞ –≤ SAR –¥–∞–Ω–Ω—ã—Ö
## –ú–µ—Ç–æ–¥—ã –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏–∏ –æ–±–ª–æ–º–æ—á–Ω–æ–≥–æ –ø–æ–∫—Ä–æ–≤–∞ –Ω–∞ –ª–µ–¥–Ω–∏–∫–∞—Ö

---

## üéØ –ü—Ä–æ–±–ª–µ–º–∞

–í SAR –¥–∞–Ω–Ω—ã—Ö —É—Ä–æ–≤–Ω–∏ –æ–±—Ä–∞—Ç–Ω–æ–≥–æ —Ä–∞—Å—Å–µ—è–Ω–∏—è —É –∫–∞–º–Ω–µ–π (–æ–±–ª–æ–º–æ—á–Ω–æ–≥–æ –ø–æ–∫—Ä–æ–≤–∞) –∏ –ª—å–¥–∞ —á–∞—Å—Ç–æ –±—ã–≤–∞—é—Ç –æ—á–µ–Ω—å –ø–æ—Ö–æ–∂–∏–º–∏, —á—Ç–æ –∑–∞—Ç—Ä—É–¥–Ω—è–µ—Ç:

- ‚úÖ –†–∞–∑–ª–∏—á–µ–Ω–∏–µ –ª–µ–¥–Ω–∏–∫–æ–≤–æ–π –ø–æ–≤–µ—Ä—Ö–Ω–æ—Å—Ç–∏ –æ—Ç –æ–∫—Ä—É–∂–∞—é—â–∏—Ö —Å–∫–∞–ª
- ‚úÖ –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –≥—Ä–∞–Ω–∏—Ü –ª–µ–¥–Ω–∏–∫–æ–≤ –ø–æ–¥ –æ–±–ª–æ–º–æ—á–Ω—ã–º –ø–æ–∫—Ä–æ–≤–æ–º
- ‚úÖ –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –¥–∏–Ω–∞–º–∏–∫–∏ –ª–µ–¥–Ω–∏–∫–æ–≤ —Å –æ–±–ª–æ–º–æ—á–Ω—ã–º –ø–æ–∫—Ä–æ–≤–æ–º
- ‚úÖ –û—Ü–µ–Ω–∫—É —Ä–µ–∞–ª—å–Ω–æ–π –ø–ª–æ—â–∞–¥–∏ –ª–µ–¥–Ω–∏–∫–æ–≤

---

## üî¨ –§–∏–∑–∏—á–µ—Å–∫–∏–µ –æ—Å–Ω–æ–≤—ã —Ä–∞–∑–ª–∏—á–∏–π

### –•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏ –æ–±—Ä–∞—Ç–Ω–æ–≥–æ —Ä–∞—Å—Å–µ—è–Ω–∏—è:

| –¢–∏–ø –ø–æ–≤–µ—Ä—Ö–Ω–æ—Å—Ç–∏ | VV –ø–æ–ª—è—Ä–∏–∑–∞—Ü–∏—è (œÉ‚Å∞, dB) | HV/VH –ø–æ–ª—è—Ä–∏–∑–∞—Ü–∏—è (œÉ‚Å∞, dB) | –†–∞–∑–ª–∏—á–∏—è |
|----------------|-------------------------|---------------------------|----------|
| **–ß–∏—Å—Ç—ã–π –ª—ë–¥** | -8 –¥–æ -3 | -15 –¥–æ -10 | –í—ã—Å–æ–∫–∏–π VV, –Ω–∏–∑–∫–∏–π –∫—Ä–æ—Å—Å-–ø–æ–ª |
| **–í–ª–∞–∂–Ω—ã–π –ª—ë–¥** | -18 –¥–æ -12 | -20 –¥–æ -15 | –ù–∏–∑–∫–∏–π VV, –æ—á–µ–Ω—å –Ω–∏–∑–∫–∏–π –∫—Ä–æ—Å—Å-–ø–æ–ª |
| **–°—É—Ö–∏–µ —Å–∫–∞–ª—ã** | -10 –¥–æ -5 | -12 –¥–æ -8 | –í—ã—Å–æ–∫–∏–π VV, —Å—Ä–µ–¥–Ω–∏–π –∫—Ä–æ—Å—Å-–ø–æ–ª |
| **–û–±–ª–æ–º–æ—á–Ω—ã–π –ø–æ–∫—Ä–æ–≤** | -12 –¥–æ -6 | -14 –¥–æ -9 | –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–π, –∑–∞–≤–∏—Å–∏—Ç –æ—Ç –≤–ª–∞–∂–Ω–æ—Å—Ç–∏ |
| **–í–ª–∞–∂–Ω—ã–µ –∫–∞–º–Ω–∏** | -15 –¥–æ -10 | -18 –¥–æ -12 | –ù–∏–∑–∫–∏–π VV, –Ω–∏–∑–∫–∏–π –∫—Ä–æ—Å—Å-–ø–æ–ª |

---

## üõ†Ô∏è –ú–µ—Ç–æ–¥—ã —Ä–µ—à–µ–Ω–∏—è

### 1. –ú–Ω–æ–≥–æ-–ø–æ–ª—è—Ä–∏–∑–∞—Ü–∏–æ–Ω–Ω—ã–π –ø–æ–¥—Ö–æ–¥

#### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∫—Ä–æ—Å—Å-–ø–æ–ª—è—Ä–∏–∑–∞—Ü–∏–∏ (HV/VH):
- **–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–æ**: HV/VH –º–µ–Ω–µ–µ —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–∞ –∫ –≥–µ–æ–º–µ—Ç—Ä–∏–∏ –ø–æ–≤–µ—Ä—Ö–Ω–æ—Å—Ç–∏
- **–ú–µ—Ç–æ–¥**: –û—Ç–Ω–æ—à–µ–Ω–∏–µ VV/HV > 5-7 dB —É–∫–∞–∑—ã–≤–∞–µ—Ç –Ω–∞ —á–∏—Å—Ç—ã–π –ª—ë–¥
- **–†–µ–∞–ª–∏–∑–∞—Ü–∏—è**: –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ dual-pol (VV+VH) –ø—Ä–æ–¥—É–∫—Ç—ã Sentinel-1

#### –ö–æ–¥ –¥–ª—è –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏–∏:
```python
def classify_ice_vs_debris(vv_image, vh_image):
    """
    –ö–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏—è –ª—å–¥–∞ vs –æ–±–ª–æ–º–æ—á–Ω–æ–≥–æ –ø–æ–∫—Ä–æ–≤–∞
    """
    # –û—Ç–Ω–æ—à–µ–Ω–∏–µ –ø–æ–ª—è—Ä–∏–∑–∞—Ü–∏–π
    ratio = vv_image / (vh_image + 1e-10)
    ratio_db = 10 * np.log10(ratio + 1e-10)

    # –ü–æ—Ä–æ–≥ –¥–ª—è —Ä–∞–∑–ª–∏—á–µ–Ω–∏—è
    ice_threshold = 7  # dB (–Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º—ã–π)

    # –ö–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏—è
    ice_mask = ratio_db > ice_threshold
    debris_mask = ratio_db <= ice_threshold

    return ice_mask, debris_mask, ratio_db
```

### 2. –í—Ä–µ–º–µ–Ω–Ω–æ–π –∞–Ω–∞–ª–∏–∑

#### –ú–Ω–æ–≥–æ-–≤—Ä–µ–º–µ–Ω–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è:
- **–õ—ë–¥**: –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Å–∏–ª—å–Ω—ã–µ —Å–µ–∑–æ–Ω–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è (—Ç–∞—è–Ω–∏–µ –ª–µ—Ç–æ–º)
- **–ö–∞–º–Ω–∏**: –°—Ç–∞–±–∏–ª—å–Ω–æ–µ –æ–±—Ä–∞—Ç–Ω–æ–µ —Ä–∞—Å—Å–µ—è–Ω–∏–µ –≤–æ –≤—Ä–µ–º–µ–Ω–∏
- **–ú–µ—Ç–æ–¥**: –ê–Ω–∞–ª–∏–∑ –¥–∏—Å–ø–µ—Ä—Å–∏–∏ –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö —Ä—è–¥–æ–≤

#### –ö–æ–¥ –¥–ª—è –≤—Ä–µ–º–µ–Ω–Ω–æ–≥–æ –∞–Ω–∞–ª–∏–∑–∞:
```python
def temporal_classification(time_series):
    """
    –ö–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏—è –ø–æ –≤—Ä–µ–º–µ–Ω–Ω—ã–º –∏–∑–º–µ–Ω–µ–Ω–∏—è–º
    """
    # –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–µ –æ—Ç–∫–ª–æ–Ω–µ–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö —Ä—è–¥–æ–≤
    std_dev = np.std(time_series, axis=0)

    # –ü–æ—Ä–æ–≥ —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç–∏ (–∫–∞–º–Ω–∏ –∏–º–µ—é—Ç –Ω–∏–∑–∫—É—é –¥–∏—Å–ø–µ—Ä—Å–∏—é)
    stability_threshold = 2  # dB

    # –°—Ç–∞–±–∏–ª—å–Ω—ã–µ –æ–±–ª–∞—Å—Ç–∏ = –∫–∞–º–Ω–∏/–æ–±–ª–æ–º–∫–∏
    stable_mask = std_dev < stability_threshold

    # –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–±–ª–∞—Å—Ç–∏ = –ª—ë–¥/—Å–Ω–µ–≥
    variable_mask = std_dev >= stability_threshold

    return stable_mask, variable_mask, std_dev
```

### 3. –¢–µ–∫—Å—Ç—É—Ä–Ω—ã–π –∞–Ω–∞–ª–∏–∑

#### –¢–µ–∫—Å—Ç—É—Ä–Ω—ã–µ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏:
- **–õ—ë–¥**: –ë–æ–ª–µ–µ –≥–ª–∞–¥–∫–∞—è –ø–æ–≤–µ—Ä—Ö–Ω–æ—Å—Ç—å, –Ω–∏–∑–∫–∞—è —Ç–µ–∫—Å—Ç—É—Ä–Ω–∞—è –∏–∑–º–µ–Ω—á–∏–≤–æ—Å—Ç—å
- **–û–±–ª–æ–º–∫–∏**: –®–µ—Ä–æ—Ö–æ–≤–∞—Ç–∞—è –ø–æ–≤–µ—Ä—Ö–Ω–æ—Å—Ç—å, –≤—ã—Å–æ–∫–∞—è –ª–æ–∫–∞–ª—å–Ω–∞—è –∏–∑–º–µ–Ω—á–∏–≤–æ—Å—Ç—å

#### –ú–µ—Ç–æ–¥—ã —Ç–µ–∫—Å—Ç—É—Ä–Ω–æ–≥–æ –∞–Ω–∞–ª–∏–∑–∞:
```python
def texture_analysis(sar_image, window_size=5):
    """
    –ê–Ω–∞–ª–∏–∑ —Ç–µ–∫—Å—Ç—É—Ä—ã –¥–ª—è –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏–∏
    """
    from skimage.feature import graycomatrix, graycoprops

    # –ù–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
    normalized = (sar_image - sar_image.min()) / (sar_image.max() - sar_image.min())
    normalized = (normalized * 255).astype(np.uint8)

    # GLCM –º–∞—Ç—Ä–∏—Ü–∞
    glcm = graycomatrix(normalized, distances=[1], angles=[0],
                       symmetric=True, normed=True)

    # –¢–µ–∫—Å—Ç—É—Ä–Ω—ã–µ –º–µ—Ç—Ä–∏–∫–∏
    contrast = graycoprops(glcm, 'contrast')[0, 0]
    homogeneity = graycoprops(glcm, 'homogeneity')[0, 0]
    energy = graycoprops(glcm, 'energy')[0, 0]

    return contrast, homogeneity, energy
```

### 4. –ú–æ—Ä—Ñ–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π –∞–Ω–∞–ª–∏–∑

#### –§–æ—Ä–º–∞ –∏ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞:
- **–õ–µ–¥–Ω–∏–∫–æ–≤—ã–µ –∑–æ–Ω—ã**: –û–±—ã—á–Ω–æ –∏–º–µ—é—Ç –±–æ–ª–µ–µ —Ä–µ–≥—É–ª—è—Ä–Ω—É—é —Ñ–æ—Ä–º—É
- **–û–±–ª–æ–º–æ—á–Ω—ã–µ –∑–æ–Ω—ã**: –ë–æ–ª–µ–µ —Ñ—Ä–∞–≥–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ, —Ö–∞–æ—Ç–∏—á–Ω—ã–µ

#### –ú–µ—Ç–æ–¥—ã:
```python
def morphological_analysis(binary_mask):
    """
    –ú–æ—Ä—Ñ–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π –∞–Ω–∞–ª–∏–∑ –¥–ª—è –æ—á–∏—Å—Ç–∫–∏ –º–∞—Å–æ–∫
    """
    from scipy.ndimage import binary_opening, binary_closing, label

    # –£–¥–∞–ª–µ–Ω–∏–µ —à—É–º–æ–≤
    cleaned = binary_opening(binary_mask, structure=np.ones((3,3)))
    cleaned = binary_closing(cleaned, structure=np.ones((3,3)))

    # –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Å–≤—è–∑–∞–Ω–Ω—ã—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç
    labeled, num_features = label(cleaned)

    # –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ —Ä–∞–∑–º–µ—Ä—É
    min_area = 10  # –º–∏–Ω–∏–º–∞–ª—å–Ω–∞—è –ø–ª–æ—â–∞–¥—å –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã (–ø–∏–∫—Å–µ–ª–∏)
    large_components = np.zeros_like(cleaned)

    for i in range(1, num_features + 1):
        component = (labeled == i)
        if np.sum(component) >= min_area:
            large_components |= component

    return large_components
```

### 5. –ö–æ–º–±–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –ø–æ–¥—Ö–æ–¥

#### –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –º–µ—Ç–æ–¥–æ–≤:
```python
def combined_classification(vv_images, vh_images=None, time_series=None):
    """
    –ö–æ–º–±–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏—è –ª–µ–¥–Ω–∏–∫–æ–≤–æ–π –ø–æ–≤–µ—Ä—Ö–Ω–æ—Å—Ç–∏
    """
    results = {}

    # 1. –ü–æ–ª—è—Ä–∏–∑–∞—Ü–∏–æ–Ω–Ω–æ–µ –æ—Ç–Ω–æ—à–µ–Ω–∏–µ (–µ—Å–ª–∏ –¥–æ—Å—Ç—É–ø–Ω—ã VH –¥–∞–Ω–Ω—ã–µ)
    if vh_images is not None:
        ice_mask_pol, debris_mask_pol, ratio = classify_ice_vs_debris(
            vv_images[-1], vh_images[-1]
        )
        results['polarization'] = {
            'ice_mask': ice_mask_pol,
            'debris_mask': debris_mask_pol,
            'ratio': ratio
        }

    # 2. –í—Ä–µ–º–µ–Ω–Ω–æ–π –∞–Ω–∞–ª–∏–∑ (–µ—Å–ª–∏ –¥–æ—Å—Ç—É–ø–Ω—ã –≤—Ä–µ–º–µ–Ω–Ω—ã–µ —Ä—è–¥—ã)
    if time_series is not None and len(time_series) > 1:
        stable_mask, variable_mask, std = temporal_classification(time_series)
        results['temporal'] = {
            'stable_mask': stable_mask,
            'variable_mask': variable_mask,
            'std_dev': std
        }

    # 3. –¢–µ–∫—Å—Ç—É—Ä–Ω—ã–π –∞–Ω–∞–ª–∏–∑
    contrast, homogeneity, energy = texture_analysis(vv_images[-1])
    results['texture'] = {
        'smooth_ice': homogeneity > 0.7,  # –í—ã—Å–æ–∫–∞—è –æ–¥–Ω–æ—Ä–æ–¥–Ω–æ—Å—Ç—å = –ª—ë–¥
        'rough_debris': contrast > 0.5   # –í—ã—Å–æ–∫–∏–π –∫–æ–Ω—Ç—Ä–∞—Å—Ç = –æ–±–ª–æ–º–∫–∏
    }

    # 4. –§–∏–Ω–∞–ª—å–Ω–∞—è –∫–æ–º–±–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –º–∞—Å–∫–∞
    final_ice_mask = np.zeros_like(vv_images[-1], dtype=bool)

    # –ö–æ–º–±–∏–Ω–∏—Ä—É–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã
    if 'polarization' in results and 'temporal' in results:
        # –õ–æ–≥–∏–∫–∞ –∫–æ–º–±–∏–Ω–∏—Ä–æ–≤–∞–Ω–∏—è
        pol_ice = results['polarization']['ice_mask']
        temp_var = results['temporal']['variable_mask']
        final_ice_mask = pol_ice & temp_var

    return results, final_ice_mask
```

---

## üìä –£–ª—É—á—à–µ–Ω–∏—è –¥–ª—è –ø–∞–π–ø–ª–∞–π–Ω–∞

### –û–±–Ω–æ–≤–ª–µ–Ω–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è (`config.yaml`):

```yaml
# –£–ª—É—á—à–µ–Ω–Ω–∞—è –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏—è –ø–æ–≤–µ—Ä—Ö–Ω–æ—Å—Ç–∏
classification:
  # –ú–Ω–æ–≥–æ-–ø–æ–ª—è—Ä–∏–∑–∞—Ü–∏–æ–Ω–Ω—ã–π –ø–æ–¥—Ö–æ–¥
  use_dual_pol: true  # –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å VV+VH –µ—Å–ª–∏ –¥–æ—Å—Ç—É–ø–Ω–æ
  polarization_ratio_threshold: 7  # dB –ø–æ—Ä–æ–≥ –¥–ª—è VV/VH –æ—Ç–Ω–æ—à–µ–Ω–∏—è

  # –í—Ä–µ–º–µ–Ω–Ω–æ–π –∞–Ω–∞–ª–∏–∑
  temporal_stability_threshold: 2  # dB –ø–æ—Ä–æ–≥ —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç–∏
  min_time_series_length: 3  # –º–∏–Ω–∏–º—É–º –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞

  # –¢–µ–∫—Å—Ç—É—Ä–Ω—ã–π –∞–Ω–∞–ª–∏–∑
  texture_window_size: 5  # —Ä–∞–∑–º–µ—Ä –æ–∫–Ω–∞ –¥–ª—è GLCM
  texture_contrast_threshold: 0.5  # –ø–æ—Ä–æ–≥ –∫–æ–Ω—Ç—Ä–∞—Å—Ç–∞

  # –ú–æ—Ä—Ñ–æ–ª–æ–≥–∏—á–µ—Å–∫–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞
  min_component_area: 10  # –ø–∏–∫—Å–µ–ª–µ–π
  morphological_opening: true
  morphological_closing: true

  # –ö–ª–∞—Å—Å—ã –ø–æ–≤–µ—Ä—Ö–Ω–æ—Å—Ç–∏
  surface_classes:
    - "clean_ice"           # –ß–∏—Å—Ç—ã–π –ª—ë–¥
    - "debris_covered_ice"  # –õ—ë–¥ –ø–æ–¥ –æ–±–ª–æ–º–∫–∞–º–∏
    - "rock_debris"         # –ö–∞–º–Ω–∏ –∏ –æ–±–ª–æ–º–∫–∏
    - "wet_snow"           # –ú–æ–∫—Ä—ã–π —Å–Ω–µ–≥
    - "dry_snow"           # –°—É—Ö–æ–π —Å–Ω–µ–≥
    - "water"              # –í–æ–¥–∞
```

### –û–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–π –ø–∞–π–ø–ª–∞–π–Ω (`sar_pipeline.py`):

```python
class ImprovedSARGlacierPipeline(SARGlacierPipeline):
    """
    –£–ª—É—á—à–µ–Ω–Ω—ã–π –ø–∞–π–ø–ª–∞–π–Ω —Å –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏–µ–π –æ–±–ª–æ–º–æ—á–Ω–æ–≥–æ –ø–æ–∫—Ä–æ–≤–∞
    """

    def classify_glacier_surfaces(self, sar_images, dates,
                                  use_dual_pol=False, vh_images=None):
        """
        –ö–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏—è —Ç–∏–ø–æ–≤ –ø–æ–≤–µ—Ä—Ö–Ω–æ—Å—Ç–∏ –ª–µ–¥–Ω–∏–∫–∞

        Args:
            sar_images: –°–ø–∏—Å–æ–∫ VV –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
            dates: –°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–µ –¥–∞—Ç—ã
            use_dual_pol: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ª–∏ –∫—Ä–æ—Å—Å-–ø–æ–ª—è—Ä–∏–∑–∞—Ü–∏—é
            vh_images: VH –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è (–µ—Å–ª–∏ –¥–æ—Å—Ç—É–ø–Ω—ã)
        """
        logger.info("Starting improved surface classification...")

        results = {}

        # 1. –ë–∞–∑–æ–≤–∞—è –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏—è –ø–æ –ø–æ—Ä–æ–≥—É
        baseline_mask = self.detect_glacier_boundaries(sar_images[-1])

        # 2. –ü–æ–ª—è—Ä–∏–∑–∞—Ü–∏–æ–Ω–Ω—ã–π –∞–Ω–∞–ª–∏–∑ (–µ—Å–ª–∏ –¥–æ—Å—Ç—É–ø–Ω—ã VH –¥–∞–Ω–Ω—ã–µ)
        if use_dual_pol and vh_images is not None:
            pol_results = self._polarization_classification(
                sar_images[-1], vh_images[-1]
            )
            results['polarization'] = pol_results

        # 3. –í—Ä–µ–º–µ–Ω–Ω–æ–π –∞–Ω–∞–ª–∏–∑
        if len(sar_images) > 2:
            temp_results = self._temporal_classification(sar_images, dates)
            results['temporal'] = temp_results

        # 4. –¢–µ–∫—Å—Ç—É—Ä–Ω—ã–π –∞–Ω–∞–ª–∏–∑
        text_results = self._texture_classification(sar_images[-1])
        results['texture'] = text_results

        # 5. –ö–æ–º–±–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏—è
        final_classification = self._combine_classifications(results)

        return results, final_classification

    def _polarization_classification(self, vv_image, vh_image):
        """–ü–æ–ª—è—Ä–∏–∑–∞—Ü–∏–æ–Ω–Ω—ã–π –∞–Ω–∞–ª–∏–∑ –¥–ª—è —Ä–∞–∑–ª–∏—á–µ–Ω–∏—è –ª—å–¥–∞ –∏ –æ–±–ª–æ–º–∫–æ–≤"""
        ratio = vv_image / (vh_image + 1e-10)
        ratio_db = 10 * np.log10(ratio + 1e-10)

        # –ü–æ—Ä–æ–≥–∏ –¥–ª—è –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏–∏
        ice_threshold = 7  # dB
        debris_threshold = 3  # dB

        ice_mask = ratio_db > ice_threshold
        debris_mask = (ratio_db >= debris_threshold) & (ratio_db <= ice_threshold)
        uncertain_mask = ratio_db < debris_threshold

        return {
            'ratio_db': ratio_db,
            'ice_mask': ice_mask,
            'debris_mask': debris_mask,
            'uncertain_mask': uncertain_mask
        }

    def _temporal_classification(self, images, dates):
        """–í—Ä–µ–º–µ–Ω–Ω–æ–π –∞–Ω–∞–ª–∏–∑ –¥–ª—è –≤—ã—è–≤–ª–µ–Ω–∏—è —Å—Ç–∞–±–∏–ª—å–Ω—ã—Ö/–ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –∑–æ–Ω"""
        # –°–æ–∑–¥–∞—Ç—å –≤—Ä–µ–º–µ–Ω–Ω—ã–µ —Ä—è–¥—ã –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –ø–∏–∫—Å–µ–ª—è
        time_series = np.stack(images, axis=0)

        # –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–µ –æ—Ç–∫–ª–æ–Ω–µ–Ω–∏–µ
        std_dev = np.std(time_series, axis=0)

        # –ö–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç –≤–∞—Ä–∏–∞—Ü–∏–∏
        mean_val = np.mean(time_series, axis=0)
        cv = std_dev / (mean_val + 1e-10)

        # –ü–æ—Ä–æ–≥–∏
        stable_threshold = 2  # dB
        variable_threshold = 0.15  # –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç –≤–∞—Ä–∏–∞—Ü–∏–∏

        stable_mask = std_dev < stable_threshold
        variable_mask = cv > variable_threshold

        return {
            'std_dev': std_dev,
            'cv': cv,
            'stable_mask': stable_mask,
            'variable_mask': variable_mask
        }

    def _texture_classification(self, image):
        """–¢–µ–∫—Å—Ç—É—Ä–Ω—ã–π –∞–Ω–∞–ª–∏–∑ –¥–ª—è —Ä–∞–∑–ª–∏—á–µ–Ω–∏—è –ø–æ–≤–µ—Ä—Ö–Ω–æ—Å—Ç–µ–π"""
        from skimage.feature import graycomatrix, graycoprops

        # –ù–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è
        normalized = (image - image.min()) / (image.max() - image.min())
        normalized = (normalized * 255).astype(np.uint8)

        # GLCM
        glcm = graycomatrix(normalized, distances=[1], angles=[0],
                           symmetric=True, normed=True)

        # –ú–µ—Ç—Ä–∏–∫–∏ —Ç–µ–∫—Å—Ç—É—Ä—ã
        contrast = graycoprops(glcm, 'contrast')[0, 0]
        homogeneity = graycoprops(glcm, 'homogeneity')[0, 0]
        energy = graycoprops(glcm, 'energy')[0, 0]

        # –ö–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏—è
        smooth_ice = homogeneity > 0.7
        rough_debris = contrast > 0.5

        return {
            'contrast': contrast,
            'homogeneity': homogeneity,
            'energy': energy,
            'smooth_ice_mask': smooth_ice,
            'rough_debris_mask': rough_debris
        }

    def _combine_classifications(self, results):
        """–ö–æ–º–±–∏–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏–∏"""
        # –ù–∞—á–∞–ª—å–Ω–∞—è –º–∞—Å–∫–∞
        combined_mask = np.zeros_like(list(results.values())[0]['ice_mask'], dtype=int)

        # –ü—Ä–∏–æ—Ä–∏—Ç–∏–∑–∞—Ü–∏—è –º–µ—Ç–æ–¥–æ–≤
        weights = {
            'polarization': 0.4,
            'temporal': 0.3,
            'texture': 0.3
        }

        # –ö–æ–º–±–∏–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ
        for method, weight in weights.items():
            if method in results:
                method_result = results[method]

                if method == 'polarization':
                    mask = method_result['ice_mask'].astype(int)
                elif method == 'temporal':
                    mask = method_result['variable_mask'].astype(int)
                elif method == 'texture':
                    mask = method_result['smooth_ice_mask'].astype(int)

                combined_mask += (mask * weight)

        # –§–∏–Ω–∞–ª—å–Ω–∞—è –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏—è
        final_ice_mask = combined_mask > 0.5

        return {
            'combined_score': combined_mask,
            'ice_mask': final_ice_mask,
            'confidence': combined_mask
        }
```

---

## üìà –ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

### 1. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ dual-pol –¥–∞–Ω–Ω—ã–µ
- –°–∫–∞—á–∏–≤–∞–π—Ç–µ –ø—Ä–æ–¥—É–∫—Ç—ã Sentinel-1 —Å VV+VH –ø–æ–ª—è—Ä–∏–∑–∞—Ü–∏–µ–π
- –≠—Ç–æ –¥–∞–µ—Ç –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –¥–ª—è –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏–∏

### 2. –°–æ–±–∏—Ä–∞–π—Ç–µ –≤—Ä–µ–º–µ–Ω–Ω—ã–µ —Ä—è–¥—ã
- –ú–∏–Ω–∏–º—É–º 3-4 –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –≤ —Ä–∞–∑–Ω—ã–µ —Å–µ–∑–æ–Ω—ã
- –õ–µ—Ç–æ + –∑–∏–º–∞ –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ —Å–µ–∑–æ–Ω–Ω—ã—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π

### 3. –í–∞–ª–∏–¥–∞—Ü–∏—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
- –°—Ä–∞–≤–Ω–∏–≤–∞–π—Ç–µ —Å –æ–ø—Ç–∏—á–µ—Å–∫–∏–º–∏ –¥–∞–Ω–Ω—ã–º–∏ (Landsat/Sentinel-2)
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ DEM –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ —Ç–æ–ø–æ–≥—Ä–∞—Ñ–∏–∏
- –ü—Ä–æ–≤–æ–¥–∏—Ç–µ –ø–æ–ª–µ–≤—ã–µ –∏–∑–º–µ—Ä–µ–Ω–∏—è –ø—Ä–∏ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

### 4. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–æ—Ä–æ–≥–æ–≤
- –ê–¥–∞–ø—Ç–∏—Ä—É–π—Ç–µ –ø–æ—Ä–æ–≥–∏ –ø–æ–¥ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π —Ä–µ–≥–∏–æ–Ω
- –¢–µ—Å—Ç–∏—Ä—É–π—Ç–µ –Ω–∞ –∏–∑–≤–µ—Å—Ç–Ω—ã—Ö –æ–±–ª–∞—Å—Ç—è—Ö
- –£—á–∏—Ç—ã–≤–∞–π—Ç–µ –ª–æ–∫–∞–ª—å–Ω—ã–µ —É—Å–ª–æ–≤–∏—è (–≤–ª–∞–∂–Ω–æ—Å—Ç—å, —Ç–∏–ø –æ–±–ª–æ–º–∫–æ–≤)

---

## üéì –ù–∞—É—á–Ω—ã–µ –∏—Å—Ç–æ—á–Ω–∏–∫–∏

1. **Nagler et al. (2015)** - "Retrieval of wet snow by means of multitemporal SAR data"
   - –ü–æ–∫–∞–∑–∞–ª–∏ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å VV/VH –æ—Ç–Ω–æ—à–µ–Ω–∏—è –¥–ª—è —Ä–∞–∑–ª–∏—á–µ–Ω–∏—è –ø–æ–≤–µ—Ä—Ö–Ω–æ—Å—Ç–µ–π

2. **Winsvold et al. (2018)** - "Using SAR satellite data time series for regional glacier mapping"
   - –î–æ–∫–∞–∑–∞–ª–∏ —Ü–µ–Ω–Ω–æ—Å—Ç—å –≤—Ä–µ–º–µ–Ω–Ω–æ–≥–æ –∞–Ω–∞–ª–∏–∑–∞ –¥–ª—è –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏–∏

3. **Paul et al. (2016)** - "The glaciers climate change initiative"
   - –†–∞–∑—Ä–∞–±–æ—Ç–∞–ª–∏ –º–µ—Ç–æ–¥—ã –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –ª–µ–¥–Ω–∏–∫–æ–≤ —Å –æ–±–ª–æ–º–æ—á–Ω—ã–º –ø–æ–∫—Ä–æ–≤–æ–º

4. **Huang et al. (2011)** - –ò—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ, —É–ø–æ–º—è–Ω—É—Ç–æ–µ –≤ –≤–∞—à–µ–º –ø—Ä–æ–µ–∫—Ç–µ
   - –í–µ—Ä–æ—è—Ç–Ω–æ, –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –∫–æ–º–±–∏–Ω–∞—Ü–∏—é –º–µ—Ç–æ–¥–æ–≤ –¥–ª—è —Ä–∞–∑–ª–∏—á–µ–Ω–∏—è –ø–æ–≤–µ—Ä—Ö–Ω–æ—Å—Ç–µ–π

---

## üí° –î–ª—è –≤–∞—à–µ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞

### –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –¥–ª—è Ala-Archa:

1. **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ dual-pol –¥–∞–Ω–Ω—ã–µ** Sentinel-1 (VV+VH)
2. **–°–æ–±–µ—Ä–∏—Ç–µ –≤—Ä–µ–º–µ–Ω–Ω—ã–µ —Ä—è–¥—ã** –º–∏–Ω–∏–º—É–º –∑–∞ 2-3 –≥–æ–¥–∞
3. **–ü—Ä–∏–º–µ–Ω–∏—Ç–µ –∫–æ–º–±–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –ø–æ–¥—Ö–æ–¥** (–ø–æ–ª—è—Ä–∏–∑–∞—Ü–∏—è + –≤—Ä–µ–º—è + —Ç–µ–∫—Å—Ç—É—Ä–∞)
4. **–ù–∞—Å—Ç—Ä–æ–π—Ç–µ –ø–æ—Ä–æ–≥–∏** –Ω–∞ –æ—Å–Ω–æ–≤–µ –∏–∑–≤–µ—Å—Ç–Ω—ã—Ö –∑–æ–Ω –ª–µ–¥–Ω–∏–∫–æ–≤
5. **–í–∞–ª–∏–¥–∏—Ä—É–π—Ç–µ** —Å –æ–ø—Ç–∏—á–µ—Å–∫–∏–º–∏ –¥–∞–Ω–Ω—ã–º–∏ –∏–ª–∏ –ø–æ–ª–µ–≤—ã–º–∏ –∏–∑–º–µ—Ä–µ–Ω–∏—è–º–∏

### –û–∂–∏–¥–∞–µ–º—ã–µ —É–ª—É—á—à–µ–Ω–∏—è:
- **–¢–æ—á–Ω–æ—Å—Ç—å –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏–∏**: +20-30% –ø–æ —Å—Ä–∞–≤–Ω–µ–Ω–∏—é —Å –ø—Ä–æ—Å—Ç—ã–º –ø–æ—Ä–æ–≥–æ–≤—ã–º –º–µ—Ç–æ–¥–æ–º
- **–ù–∞–¥–µ–∂–Ω–æ—Å—Ç—å –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞**: –õ—É—á—à–µ–µ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –¥–∏–Ω–∞–º–∏–∫–∏ –ª–µ–¥–Ω–∏–∫–æ–≤
- **–ù–∞—É—á–Ω–∞—è —Ü–µ–Ω–Ω–æ—Å—Ç—å**: –ë–æ–ª–µ–µ –¥–µ—Ç–∞–ª—å–Ω—ã–π –∞–Ω–∞–ª–∏–∑ –¥–ª—è –ø—É–±–ª–∏–∫–∞—Ü–∏–∏

---

## üîß –†–µ–∞–ª–∏–∑–∞—Ü–∏—è –≤ –∫–æ–¥–µ

### –®–∞–≥–∏ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏:

1. **–û–±–Ω–æ–≤–∏—Ç–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é** –≤ `config.yaml`
2. **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —É–ª—É—á—à–µ–Ω–Ω—ã–π –ø–∞–π–ø–ª–∞–π–Ω** `ImprovedSARGlacierPipeline`
3. **–¢–µ—Å—Ç–∏—Ä—É–π—Ç–µ –Ω–∞ –≤–∞—à–∏—Ö –¥–∞–Ω–Ω—ã—Ö** —Å –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–µ–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
4. **–ù–∞—Å—Ç—Ä–æ–π—Ç–µ –ø–æ—Ä–æ–≥–∏** –¥–ª—è –æ–ø—Ç–∏–º–∞–ª—å–Ω–æ–π –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏–∏

–≠—Ç–æ—Ç –ø–æ–¥—Ö–æ–¥ –∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ —É–ª—É—á—à–∏—Ç —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å —Ä–∞–∑–ª–∏—á–∞—Ç—å –ª–µ–¥–Ω–∏–∫–æ–≤—ã–µ –ø–æ–≤–µ—Ä—Ö–Ω–æ—Å—Ç–∏ –æ—Ç –æ–±–ª–æ–º–æ—á–Ω–æ–≥–æ –ø–æ–∫—Ä–æ–≤–∞ –≤ –≤–∞—à–∏—Ö SAR –¥–∞–Ω–Ω—ã—Ö!

---

**–ö–æ–º–∞–Ω–¥–∞ TengriSpacers**  
**NASA Space Apps Challenge 2025**  
**Challenge: Through the Radar Looking Glass**


